---
import services from '../data/services.json';

interface Service {
  icon: string;
  title: string;
  description: string;
  included?: boolean;
}

interface Icons {
  [key: string]: string;
}

const icons: Icons = {
  layout: `<path d="M3 3h18v18H3V3zm16 16V5H5v14h14zM7 7h4v4H7V7zm6 0h4v4h-4V7zM7 13h4v4H7v-4zm6 0h4v4h-4v-4z"></path>`,
  phone: `<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>`,
  search: `<path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>`,
  edit: `<path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path>`,
  chart: `<path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path>`,
  server: `<path d="M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path>`
};
---

<section class="section">
  <div class="container">
    <div class="section-header text-center">
      <h2 class="section-header__title animate-fade-up">
        <span class="text-gradient">What we build</span>
      </h2>
      <p class="section-header__subtitle animate-fade-up animate-delay-1">
        Everything you need to start getting more leads, nothing you don't.
      </p>
    </div>

    <div class="services-grid">
      {services.map((service: Service, index) => (
        <div 
          class={`card services-card services-card--${index % 3 === 0 ? 'large' : index % 3 === 1 ? 'medium' : 'medium'} animate-fade-up`}
          style={`transition-delay: ${(index + 2) * 0.1}s`}
          data-tilt
        >
          <div class="services-card__icon">
            <svg class="icon icon--lg" viewBox="0 0 24 24" aria-hidden="true" set:html={icons[service.icon] || icons.layout} />
          </div>
          <h3 class="services-card__title">{service.title}</h3>
          <p class="services-card__text">{service.description}</p>
          {service.included && (
            <span class="badge badge--accent">Included</span>
          )}
          <div class="services-card__glow"></div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .section-header {
    margin-bottom: var(--space-12);
  }

  .section-header__title {
    font-size: var(--text-h2);
    font-weight: 700;
    margin-bottom: var(--space-3);
  }

  .section-header__subtitle {
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    max-width: 600px;
    margin: 0 auto;
  }

  /* Masonry Grid Layout */
  .services-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-6);
    grid-auto-rows: minmax(300px, auto);
  }

  @media (min-width: 640px) {
    .services-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .services-grid {
      grid-template-columns: repeat(3, 1fr);
    }

    .services-card--large {
      grid-column: span 2;
      grid-row: span 2;
    }
  }

  .services-card {
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
  }

  .services-card__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 64px;
    height: 64px;
    background: var(--gradient-primary);
    border-radius: var(--radius-md);
    margin-bottom: var(--space-5);
    box-shadow: var(--glow-sm);
  }

  .services-card__icon .icon {
    color: #FFFFFF;
  }

  .services-card__title {
    font-size: var(--text-h3);
    font-weight: 700;
    margin-bottom: var(--space-3);
    color: var(--color-text-primary);
  }

  .services-card__text {
    flex-grow: 1;
    color: var(--color-text-secondary);
    line-height: var(--line-height-relaxed);
    margin-bottom: var(--space-4);
  }

  .services-card__glow {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(99, 102, 241, 0.15), transparent 50%);
    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
  }

  .services-card:hover .services-card__glow {
    opacity: 1;
  }

  @media (max-width: 639px) {
    .section-header__title {
      font-size: var(--text-h3);
    }

    .section-header__subtitle {
      font-size: var(--text-body);
    }

    .services-grid {
      grid-template-columns: 1fr;
    }

    .services-card--large {
      grid-column: span 1;
      grid-row: span 1;
    }
  }
</style>
